var renderTabs=function(b){var a=$("#tabs");var c=function(g){if(g.url.substr(8)=="chrome://"){return}var f=$("<li><a><img /><span></span></a></li>")[0];var d=f.children[0].children[1];d.href=g.url;d.innerText=g.title||g.url;d.parentElement.dataset.tabId=g.id;d.parentElement.dataset.windowId=g.windowId;d.parentElement.dataset.index=g.index;var e=f.children[0].children[0];e.src=g.favIconUrl;a.append(f)};b.forEach(c)};var readHTMLFromMHTML=function(a,b){b=b||function(){}};$(document).ready(function(){chrome.tabs.query({},renderTabs)});$("img").live("click",function(a){$(this.parentElement).trigger("click")});$("a").live("click",function(g){var f=window.intent||window.webkitIntent;var d;if(f.type==="image/jpeg"){d="jpeg"}else{d="png"}var c=parseInt(g.target.dataset.tabId);var a=parseInt(g.target.dataset.windowId);var b=parseInt(g.target.dataset.index);chrome.windows.create({tabId:c},function(e){chrome.tabs.captureVisibleTab(e.id,{format:d},function(h){chrome.tabs.move([c],{windowId:a,index:b},function(){f.postResult(h)})})});return false});