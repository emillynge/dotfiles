var defaultPlugins=[{name:"Save To Disk",key:"save",dataType:"image",onclick:function(a){String.prototype.twoDigits=function(){return this.replace(/^(.)$/,"0$1")};a.image_base64(function(g){dataURItoBlob=function(h){var l=atob(h);var k=[];for(var j=0;j<l.length;j++){k.push(l.charCodeAt(j))}return new Blob([new Uint8Array(k)],{type:"image/jpeg"})};var b=dataURItoBlob(g);var f=URL.createObjectURL(b);var e;e=a.page_title||a.page_url;e=e.replace(/[%&\(\)\\\/\:\*\?\"\<\>\|\/\]]/g," ");e+=".png";var d=document.createEvent("MouseEvents");d.initMouseEvent("click",true,true,window,0,0,0,0,0,false,true,false,false,0,null);var c=$("<a></a>").appendTo(document.body);c.attr({href:f,download:e})[0].dispatchEvent(d)})}},{name:"Share with Webpage Screenshot",key:"webpagescreenshot",dataType:"image",url:"%s"},{name:"Print",key:"print",onclick:function(b){var c=b.image_base64();var a=new Dialog({html:'<img style=border:none;max-width:100% src="data:image/jpg;base64,'+c+'">'});a.print()},dataType:"image"},{name:"gmail",key:"gmail",dataType:"image",url:"https://mail.google.com/mail/?view=cm&tf=0&fs=1&body=%s"+encodeURIComponent(" Captured by http://bit.ly/cF6sYP")},{name:"drive",key:"googledrive",dataType:"image",onclick:function(a){start=function(){googleAuth.authorize(function(){var d={title:a.page_title+".png",mimeType:"image/png",description:"Taken by Webpage Screenshot. http://www.webpagescreenshot.info"};var b=287032396531387;var c=[];c.push("--"+b);c.push("Content-Type: application/json");c.push("");c.push(JSON.stringify(d));c.push("--"+b);c.push("Content-Type: image/png");c.push("Content-Transfer-Encoding: base64");c.push("");c.push(a.image_base64());c.push("--"+b+"--");theParts=c.join("\r\n");$.ajax({url:"https://www.googleapis.com/upload/drive/v2/files?uploadType=multipart",method:"post",headers:{Authorization:"OAuth "+googleAuth.getAccessToken(),"Content-Type":"multipart/mixed; boundary="+b},data:theParts}).done(function(e){if(e.error){googleAuth.clear()}chrome.tabs.create({url:e.alternateLink})}).fail(function(){console.log("error");googleAuth.clear()})})};googleAuth=new OAuth2("google",{client_id:"545443912834-j7vdfe6gar81lu14oatf33tgtlcbi5gq.apps.googleusercontent.com",client_secret:"213pVJTRShuSGESsRO92G1qV",api_scope:"https://www.googleapis.com/auth/drive.install https://www.googleapis.com/auth/drive https://www.googleapis.com/auth/urlshortener https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email"},start)}},{key:"dropbox",name:"dropbox",dataType:"image",onclick:function(a){a.image_url(function(b){window.open("http://www.webpagescreenshot.info/dropboxChooser.php?url="+encodeURIComponent(b.replace(/img/,"i3"))+"&filename="+encodeURIComponent(a.page_title),"dp","width=300,height=300")})}},{name:"facebook",key:"facebook",dataType:"image",url:"http://www.facebook.com/sharer.php?u=%s&t= Captured by Webpage Screenshot - http://bit.ly/cF6sYP"},{name:"evernote",key:"evernote",dataType:"image page",url:"http://s.evernote.com/grclip?url=%s&title=%t"},{name:"Save To WordPress",key:"wordpress",onclick:function(b){var a,c;a="<div><table>";a+='<tr><td nowrap>WordPress Domain:</td><td><input  placeholder="http://" name=domain></td></tr>';a+="<tr><td nowrap>UserName:</td><td><input name=username></td></tr>";a+="<tr><td nowrap>Password:</td><td><input  name=password type=password></td></tr>";a+="</table>";a+="<small>Your password sent directly to your server.</small>";a+="<center><button name=btnUpload>Upload Now!</button></center>";a+="</div>";a=$(a);$("[name=btnUpload]",a).click(function(){var f,g,d;f=$("[name=domain]",a).val();g=$("[name=username]",a).val();d=$("[name=password]",a).val();var e=new XmlRpcRequest(f+"/xmlrpc.php","wp.uploadFile");e.clearParams();e.addParam(0);e.addParam(g);e.addParam(d);b.image_base64(function(h){e.addParam({name:b.title+".jpg",type:"image/jpg",bits:new Base64(h,true)});jqXhr=x=e.send();jqXhr.success(function(i){if(i.faultString){alert(i.faultString)}else{b.createTab(i.url);c.remove()}})})});c=b.dialog(a)},dataType:"image"},{name:"Send By Email",key:"email",onclick:function(c){var b,d;b="<div><table>";b+='<tr><td nowrap>To:</td><td><input  placeholder="user@domain.com" name=to></td></tr>';b+="<tr><td nowrap>Subject:</td><td><input name=subject></td></tr>";b+="</table>";b+="<center><button name=btnUpload>Send Now!</button></center>";b+="</div>";b=$(b);var a=this;$("[name=btnUpload]",b).click(function(){var f,h,e,g;to=$("[name=to]",b).val();subject=$("[name=subject]",b).val();c.image_url(function(i){$.ajax({url:"http://www.webpagescreenshot.info/sendByEmail.php",data:{to:to,subject:subject,url:i}}).success(function(){d.remove()})})});d=this.dialog(b)},dataType:"image"},{name:"Search Engine",key:"ddddwsss",dataType:"text",url:"http://www.google.com/search?q=%s"},{name:"Translate text",key:"translate",dataType:"text",url:"http://translate.google.com/#auto/en/%t"},{name:"Translate Text",key:"sadwdw",dataType:"page",url:"http://translate.google.com/#auto/en/%s"},{name:"Google Reverse Search",key:"googleimages",dataType:"image",url:"http://images.google.com/searchbyimage?image_url=%c"},{name:"vk",key:"vk",dataType:"image",url:"http://vkontakte.ru/share.php?url=%t Captured by http://bit.ly/cF6sYP"},{name:"vk",key:"vk",dataType:"image",url:"http://vkontakte.ru/share.php?url=%t Captured by http://bit.ly/cF6sYP"},{name:"twitter",key:"twitter",dataType:"image",url:"http://twitter.com/home?status=%s Captured by http://bit.ly/cF6sYP"},{name:"gplus",key:"gplus",dataType:"image",url:"https://plus.google.com/share?url=%s Captured by http://bit.ly/cF6sYP"},{name:"vk",key:"vk",dataType:"image",url:"http://vkontakte.ru/share.php?url=%s Captured by http://bit.ly/cF6sYP"},{name:"microsoft",key:"microsoft",dataType:"image",url:"https://dub117.mail.live.com/default.aspx?rru=compose&subject=WebpageScreenshot&body=%s"+encodeURIComponent(" Captured by Webpage Screenshot - http://bit.ly/cF6sYP")},{name:"Blogger",key:"blogger",url:"http://www.blogger.com/blog_this.pyra?t=&u=&n=#ws={image_url}",dataType:"image"},{name:"Pinterest",key:"pinterest",dataType:"image",url:"http://pinterest.com/pin/create/bookmarklet/?media={image_url}&url=%s&description={page_title}"},{name:"QR Code",dataType:"image",key:"qrcode",onclick:function(b){var c=function(){var q=function(F,u){var N=236;var M=17;var z=F;var B=l[u];var w=null;var I=0;var s=null;var D=new Array();var J={};var G=function(P,O){I=z*4+17;w=function(T){var R=new Array(T);for(var S=0;S<T;S+=1){R[S]=new Array(T);for(var Q=0;Q<T;Q+=1){R[S][Q]=null}}return R}(I);C(0,0);C(I-7,0);C(0,I-7);E();t();L(P,O);if(z>=7){A(P)}if(s==null){s=v(z,B,D)}H(s,O)};var C=function(Q,O){for(var P=-1;P<=7;P+=1){if(Q+P<=-1||I<=Q+P){continue}for(var R=-1;R<=7;R+=1){if(O+R<=-1||I<=O+R){continue}if((0<=P&&P<=6&&(R==0||R==6))||(0<=R&&R<=6&&(P==0||P==6))||(2<=P&&P<=4&&2<=R&&R<=4)){w[Q+P][O+R]=true}else{w[Q+P][O+R]=false}}}};var y=function(){var R=0;var Q=0;for(var P=0;P<8;P+=1){G(true,P);var O=k.getLostPoint(J);if(P==0||R>O){R=O;Q=P}}return Q};var t=function(){for(var O=8;O<I-8;O+=1){if(w[O][6]!=null){continue}w[O][6]=(O%2==0)}for(var P=8;P<I-8;P+=1){if(w[6][P]!=null){continue}w[6][P]=(P%2==0)}};var E=function(){var U=k.getPatternPosition(z);for(var Q=0;Q<U.length;Q+=1){for(var P=0;P<U.length;P+=1){var S=U[Q];var O=U[P];if(w[S][O]!=null){continue}for(var R=-2;R<=2;R+=1){for(var T=-2;T<=2;T+=1){if(R==-2||R==2||T==-2||T==2||(R==0&&T==0)){w[S+R][O+T]=true}else{w[S+R][O+T]=false}}}}}};var A=function(R){var Q=k.getBCHTypeNumber(z);for(var P=0;P<18;P+=1){var O=(!R&&((Q>>P)&1)==1);w[Math.floor(P/3)][P%3+I-8-3]=O}for(var P=0;P<18;P+=1){var O=(!R&&((Q>>P)&1)==1);w[P%3+I-8-3][Math.floor(P/3)]=O}};var L=function(T,S){var R=(B<<3)|S;var Q=k.getBCHTypeInfo(R);for(var P=0;P<15;P+=1){var O=(!T&&((Q>>P)&1)==1);if(P<6){w[P][8]=O}else{if(P<8){w[P+1][8]=O}else{w[I-15+P][8]=O}}}for(var P=0;P<15;P+=1){var O=(!T&&((Q>>P)&1)==1);if(P<8){w[8][I-P-1]=O}else{if(P<9){w[8][15-P-1+1]=O}else{w[8][15-P-1]=O}}}w[I-8][8]=(!T)};var H=function(T,P){var R=-1;var Y=I-1;var S=7;var O=0;var W=k.getMaskFunction(P);for(var Q=I-1;Q>0;Q-=2){if(Q==6){Q-=1}while(true){for(var V=0;V<2;V+=1){if(w[Y][Q-V]==null){var U=false;if(O<T.length){U=(((T[O]>>>S)&1)==1)}var X=W(Y,Q-V);if(X){U=!U}w[Y][Q-V]=U;S-=1;if(S==-1){O+=1;S=7}}}Y+=R;if(Y<0||I<=Y){Y-=R;R=-R;break}}}};var K=function(Y,ab){var Q=0;var ae=0;var ac=0;var P=new Array(ab.length);var T=new Array(ab.length);for(var W=0;W<ab.length;W+=1){var X=ab[W].dataCount;var O=ab[W].totalCount-X;ae=Math.max(ae,X);ac=Math.max(ac,O);P[W]=new Array(X);for(var Z=0;Z<P[W].length;Z+=1){P[W][Z]=255&Y.getBuffer()[Z+Q]}Q+=X;var U=k.getErrorCorrectPolynomial(O);var ad=h(P[W],U.getLength()-1);var R=ad.mod(U);T[W]=new Array(U.getLength()-1);for(var Z=0;Z<T[W].length;Z+=1){var V=Z+R.getLength()-T[W].length;T[W][Z]=(V>=0)?R.getAt(V):0}}var aa=0;for(var Z=0;Z<ab.length;Z+=1){aa+=ab[Z].totalCount}var af=new Array(aa);var S=0;for(var Z=0;Z<ae;Z+=1){for(var W=0;W<ab.length;W+=1){if(Z<P[W].length){af[S]=P[W][Z];S+=1}}}for(var Z=0;Z<ac;Z+=1){for(var W=0;W<ab.length;W+=1){if(Z<T[W].length){af[S]=T[W][Z];S+=1}}}return af};var v=function(V,U,R){var P=j.getRSBlocks(V,U);var O=i();for(var Q=0;Q<R.length;Q+=1){var T=R[Q];O.put(T.getMode(),4);O.put(T.getLength(),k.getLengthInBits(T.getMode(),V));T.write(O)}var S=0;for(var Q=0;Q<P.length;Q+=1){S+=P[Q].dataCount}if(O.getLengthInBits()>S*8){throw new Error("code length overflow. ("+O.getLengthInBits()+">"+S*8+")")}if(O.getLengthInBits()+4<=S*8){O.put(0,4)}while(O.getLengthInBits()%8!=0){O.putBit(false)}while(true){if(O.getLengthInBits()>=S*8){break}O.put(N,8);if(O.getLengthInBits()>=S*8){break}O.put(M,8)}return K(O,P)};J.addData=function(P){var O=p(P);D.push(O);s=null};J.isDark=function(P,O){if(P<0||I<=P||O<0||I<=O){throw new Error(P+","+O)}return w[P][O]};J.getModuleCount=function(){return I};J.make=function(){G(false,y())};J.createTableTag=function(S,Q){S=S||2;Q=(typeof Q=="undefined")?S*4:Q;var O="";O+='<table style="';O+=" border-width: 0px; border-style: none;";O+=" border-collapse: collapse;";O+=" padding: 0px; margin: "+Q+"px;";O+='">';O+="<tbody>";for(var P=0;P<J.getModuleCount();P+=1){O+="<tr>";for(var R=0;R<J.getModuleCount();R+=1){O+='<td style="';O+=" border-width: 0px; border-style: none;";O+=" border-collapse: collapse;";O+=" padding: 0px; margin: 0px;";O+=" width: "+S+"px;";O+=" height: "+S+"px;";O+=" background-color: ";O+=J.isDark(P,R)?"#000000":"#ffffff";O+=";";O+='"/>'}O+="</tr>"}O+="</tbody>";O+="</table>";return O};J.createImgTag=function(S,R){S=S||2;R=(typeof R=="undefined")?S*4:R;var Q=J.getModuleCount()*S+R*2;var P=R;var O=Q-R;return g(Q,Q,function(T,W){if(P<=T&&T<O&&P<=W&&W<O){var V=Math.floor((T-P)/S);var U=Math.floor((W-P)/S);return J.isDark(U,V)?0:1}else{return 1}})};return J};q.stringToBytes=function(v){var t=new Array();for(var u=0;u<v.length;u+=1){var w=v.charCodeAt(u);t.push(w&255)}return t};q.createStringToBytes=function(v,u){var t=function(){var G=d(v);var w=function(){var H=G.read();if(H==-1){throw new Error()}return H};var z=0;var A={};while(true){var E=G.read();if(E==-1){break}var D=w();var C=w();var B=w();var y=String.fromCharCode((E<<8)|D);var F=(C<<8)|B;A[y]=F;z+=1}if(z!=u){throw new Error(z+" != "+u)}return A}();var s="?".charCodeAt(0);return function(A){var y=new Array();for(var z=0;z<A.length;z+=1){var B=A.charCodeAt(z);if(B<128){y.push(B)}else{var w=t[A.charAt(z)];if(typeof w=="number"){if((w&255)==w){y.push(w)}else{y.push(w>>>8);y.push(w&255)}}else{y.push(s)}}}return y}};var m={MODE_NUMBER:1<<0,MODE_ALPHA_NUM:1<<1,MODE_8BIT_BYTE:1<<2,MODE_KANJI:1<<3};var l={L:1,M:0,Q:3,H:2};var f={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};var k=function(){var v=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]];var s=(1<<10)|(1<<8)|(1<<5)|(1<<4)|(1<<2)|(1<<1)|(1<<0);var y=(1<<12)|(1<<11)|(1<<10)|(1<<9)|(1<<8)|(1<<5)|(1<<2)|(1<<0);var u=(1<<14)|(1<<12)|(1<<10)|(1<<4)|(1<<1);var w={};var t=function(z){var A=0;while(z!=0){A+=1;z>>>=1}return A};w.getBCHTypeInfo=function(z){var A=z<<10;while(t(A)-t(s)>=0){A^=(s<<(t(A)-t(s)))}return((z<<10)|A)^u};w.getBCHTypeNumber=function(z){var A=z<<12;while(t(A)-t(y)>=0){A^=(y<<(t(A)-t(y)))}return(z<<12)|A};w.getPatternPosition=function(z){return v[z-1]};w.getMaskFunction=function(z){switch(z){case f.PATTERN000:return function(B,A){return(B+A)%2==0};case f.PATTERN001:return function(B,A){return B%2==0};case f.PATTERN010:return function(B,A){return A%3==0};case f.PATTERN011:return function(B,A){return(B+A)%3==0};case f.PATTERN100:return function(B,A){return(Math.floor(B/2)+Math.floor(A/3))%2==0};case f.PATTERN101:return function(B,A){return(B*A)%2+(B*A)%3==0};case f.PATTERN110:return function(B,A){return((B*A)%2+(B*A)%3)%2==0};case f.PATTERN111:return function(B,A){return((B*A)%3+(B+A)%2)%2==0};default:throw new Error("bad maskPattern:"+z)}};w.getErrorCorrectPolynomial=function(A){var z=h([1],0);for(var B=0;B<A;B+=1){z=z.multiply(h([1,r.gexp(B)],0))}return z};w.getLengthInBits=function(A,z){if(1<=z&&z<10){switch(A){case m.MODE_NUMBER:return 10;case m.MODE_ALPHA_NUM:return 9;case m.MODE_8BIT_BYTE:return 8;case m.MODE_KANJI:return 8;default:throw new Error("mode:"+A)}}else{if(z<27){switch(A){case m.MODE_NUMBER:return 12;case m.MODE_ALPHA_NUM:return 11;case m.MODE_8BIT_BYTE:return 16;case m.MODE_KANJI:return 10;default:throw new Error("mode:"+A)}}else{if(z<41){switch(A){case m.MODE_NUMBER:return 14;case m.MODE_ALPHA_NUM:return 13;case m.MODE_8BIT_BYTE:return 16;case m.MODE_KANJI:return 12;default:throw new Error("mode:"+A)}}else{throw new Error("type:"+z)}}}};w.getLostPoint=function(I){var B=I.getModuleCount();var C=0;for(var K=0;K<B;K+=1){for(var A=0;A<B;A+=1){var H=0;var G=I.isDark(K,A);for(var z=-1;z<=1;z+=1){if(K+z<0||B<=K+z){continue}for(var F=-1;F<=1;F+=1){if(A+F<0||B<=A+F){continue}if(z==0&&F==0){continue}if(G==I.isDark(K+z,A+F)){H+=1}}}if(H>5){C+=(3+H-5)}}}for(var K=0;K<B-1;K+=1){for(var A=0;A<B-1;A+=1){var D=0;if(I.isDark(K,A)){D+=1}if(I.isDark(K+1,A)){D+=1}if(I.isDark(K,A+1)){D+=1}if(I.isDark(K+1,A+1)){D+=1}if(D==0||D==4){C+=3}}}for(var K=0;K<B;K+=1){for(var A=0;A<B-6;A+=1){if(I.isDark(K,A)&&!I.isDark(K,A+1)&&I.isDark(K,A+2)&&I.isDark(K,A+3)&&I.isDark(K,A+4)&&!I.isDark(K,A+5)&&I.isDark(K,A+6)){C+=40}}}for(var A=0;A<B;A+=1){for(var K=0;K<B-6;K+=1){if(I.isDark(K,A)&&!I.isDark(K+1,A)&&I.isDark(K+2,A)&&I.isDark(K+3,A)&&I.isDark(K+4,A)&&!I.isDark(K+5,A)&&I.isDark(K+6,A)){C+=40}}}var J=0;for(var A=0;A<B;A+=1){for(var K=0;K<B;K+=1){if(I.isDark(K,A)){J+=1}}}var E=Math.abs(100*J/B/B-50)/5;C+=E*10;return C};return w}();var r=function(){var s=new Array(256);var u=new Array(256);for(var t=0;t<8;t+=1){s[t]=1<<t}for(var t=8;t<256;t+=1){s[t]=s[t-4]^s[t-5]^s[t-6]^s[t-8]}for(var t=0;t<255;t+=1){u[s[t]]=t}var v={};v.glog=function(w){if(w<1){throw new Error("glog("+w+")")}return u[w]};v.gexp=function(w){while(w<0){w+=255}while(w>=256){w-=255}return s[w]};return v}();function h(t,s){if(typeof t.length=="undefined"){throw new Error(t.length+"/"+s)}var u=function(){var z=0;while(z<t.length&&t[z]==0){z+=1}var y=new Array(t.length-z+s);for(var w=0;w<t.length-z;w+=1){y[w]=t[w+z]}return y}();var v={};v.getAt=function(w){return u[w]};v.getLength=function(){return u.length};v.multiply=function(A){var y=new Array(v.getLength()+A.getLength()-1);for(var z=0;z<v.getLength();z+=1){for(var w=0;w<A.getLength();w+=1){y[z+w]^=r.gexp(r.glog(v.getAt(z))+r.glog(A.getAt(w)))}}return h(y,0)};v.mod=function(A){if(v.getLength()-A.getLength()<0){return v}var z=r.glog(v.getAt(0))-r.glog(A.getAt(0));var w=new Array(v.getLength());for(var y=0;y<v.getLength();y+=1){w[y]=v.getAt(y)}for(var y=0;y<A.getLength();y+=1){w[y]^=r.gexp(r.glog(A.getAt(y))+z)}return h(w,0).mod(A)};return v}var j=function(){var t=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16]];var s=function(w,y){var z={};z.totalCount=w;z.dataCount=y;return z};var v={};var u=function(y,w){switch(w){case l.L:return t[(y-1)*4+0];case l.M:return t[(y-1)*4+1];case l.Q:return t[(y-1)*4+2];case l.H:return t[(y-1)*4+3];default:return undefined}};v.getRSBlocks=function(z,F){var y=u(z,F);if(typeof y=="undefined"){throw new Error("bad rs block @ typeNumber:"+z+"/errorCorrectLevel:"+F)}var w=y.length/3;var D=new Array();for(var B=0;B<w;B+=1){var C=y[B*3+0];var G=y[B*3+1];var E=y[B*3+2];for(var A=0;A<C;A+=1){D.push(s(G,E))}}return D};return v}();var i=function(){var s=new Array();var u=0;var t={};t.getBuffer=function(){return s};t.getAt=function(v){var w=Math.floor(v/8);return((s[w]>>>(7-v%8))&1)==1};t.put=function(v,y){for(var w=0;w<y;w+=1){t.putBit(((v>>>(y-w-1))&1)==1)}};t.getLengthInBits=function(){return u};t.putBit=function(w){var v=Math.floor(u/8);if(s.length<=v){s.push(0)}if(w){s[v]|=(128>>>(u%8))}u+=1};return t};var p=function(v){var u=m.MODE_8BIT_BYTE;var s=v;var t=q.stringToBytes(v);var w={};w.getMode=function(){return u};w.getLength=function(y){return t.length};w.write=function(y){for(var z=0;z<t.length;z+=1){y.put(t[z],8)}};return w};var n=function(){var s=new Array();var t={};t.writeByte=function(u){s.push(u&255)};t.writeShort=function(u){t.writeByte(u);t.writeByte(u>>>8)};t.writeBytes=function(v,y,u){y=y||0;u=u||v.length;for(var w=0;w<u;w+=1){t.writeByte(v[w+y])}};t.writeString=function(v){for(var u=0;u<v.length;u+=1){t.writeByte(v.charCodeAt(u))}};t.toByteArray=function(){return s};t.toString=function(){var v="";v+="[";for(var u=0;u<s.length;u+=1){if(u>0){v+=","}v+=s[u]}v+="]";return v};return t};var e=function(){var t=0;var w=0;var z=0;var s="";var y={};var v=function(A){s+=String.fromCharCode(u(A&63))};var u=function(A){if(A<0){}else{if(A<26){return 65+A}else{if(A<52){return 97+(A-26)}else{if(A<62){return 48+(A-52)}else{if(A==62){return 43}else{if(A==63){return 47}}}}}}throw new Error("n:"+A)};y.writeByte=function(A){t=(t<<8)|(A&255);w+=8;z+=1;while(w>=6){v(t>>>(w-6));w-=6}};y.flush=function(){if(w>0){v(t<<(6-w));t=0;w=0}if(z%3!=0){var B=3-z%3;for(var A=0;A<B;A+=1){s+="="}}};y.toString=function(){return s};return y};var d=function(w){var z=w;var s=0;var t=0;var u=0;var y={};y.read=function(){while(u<8){if(s>=z.length){if(u==0){return -1}throw new Error("unexpected end of file./"+u)}var B=z.charAt(s);s+=1;if(B=="="){u=0;return -1}else{if(B.match(/^\s$/)){continue}}t=(t<<6)|v(B.charCodeAt(0));u+=6}var A=(t>>>(u-8))&255;u-=8;return A};var v=function(A){if(65<=A&&A<=90){return A-65}else{if(97<=A&&A<=122){return A-97+26}else{if(48<=A&&A<=57){return A-48+52}else{if(A==43){return 62}else{if(A==47){return 63}else{throw new Error("c:"+A)}}}}}};return y};var o=function(s,A){var v=s;var w=A;var t=new Array(s*A);var y={};y.setPixel=function(C,E,D){t[E*v+C]=D};y.write=function(D){D.writeString("GIF87a");D.writeShort(v);D.writeShort(w);D.writeByte(128);D.writeByte(0);D.writeByte(0);D.writeByte(0);D.writeByte(0);D.writeByte(0);D.writeByte(255);D.writeByte(255);D.writeByte(255);D.writeString(",");D.writeShort(0);D.writeShort(0);D.writeShort(v);D.writeShort(w);D.writeByte(0);var E=2;var C=u(E);D.writeByte(E);var F=0;while(C.length-F>255){D.writeByte(255);D.writeBytes(C,F,255);F+=255}D.writeByte(C.length-F);D.writeBytes(C,F,C.length-F);D.writeByte(0);D.writeString(";")};var z=function(D){var E=D;var F=0;var C=0;var G={};G.write=function(I,H){if((I>>>H)!=0){throw new Error("length over")}while(F+H>=8){E.writeByte(255&((I<<F)|C));H-=(8-F);I>>>=(8-F);C=0;F=0}C=(I<<F)|C;F=F+H};G.flush=function(){if(F>0){E.writeByte(C)}};return G};var u=function(D){var H=1<<D;var F=(1<<D)+1;var J=D+1;var L=B();for(var G=0;G<H;G+=1){L.add(String.fromCharCode(G))}L.add(String.fromCharCode(H));L.add(String.fromCharCode(F));var E=n();var C=z(E);C.write(H,J);var K=0;var M=String.fromCharCode(t[K]);K+=1;while(K<t.length){var I=String.fromCharCode(t[K]);K+=1;if(L.contains(M+I)){M=M+I}else{C.write(L.indexOf(M),J);if(L.size()<4095){if(L.size()==(1<<J)){J+=1}L.add(M+I)}M=I}}C.write(L.indexOf(M),J);C.write(F,J);C.flush();return E.toByteArray()};var B=function(){var D={};var C=0;var E={};E.add=function(F){if(E.contains(F)){throw new Error("dup key:"+F)}D[F]=C;C+=1};E.size=function(){return C};E.indexOf=function(F){return D[F]};E.contains=function(F){return typeof D[F]!="undefined"};return E};return y};var g=function(s,E,A,w){var v=o(s,E);for(var B=0;B<E;B+=1){for(var D=0;D<s;D+=1){v.setPixel(D,B,A(D,B))}}var C=n();v.write(C);var z=e();var F=C.toByteArray();for(var u=0;u<F.length;u+=1){z.writeByte(F[u])}z.flush();var t="";t+="<img";t+='\u0020src="';t+="data:image/gif;base64,";t+=z;t+='"';t+='\u0020width="';t+=s;t+='"';t+='\u0020height="';t+=E;t+='"';if(w){t+='\u0020alt="';t+=w;t+='"'}t+="/>";return t};return q}();var a=function(h,g,f,e){var d=c(g||4,f||"M");d.addData(h);d.make();return d.createImgTag(10)};b.image_url(function(e){x="<center>"+a(e)+"<br><small>"+e+"</small></center>";var f=new Dialog({html:x,title:"QR Code",ui:"dialog"});f.show()})}},{name:"del.icio.us",key:"del",url:"http://del.icio.us/post?url=%s&title=%t Captured by Webpage Screenshot - http://bit.ly/cF6sYP",dataType:"image"},{name:"Digg",key:"digg",url:"http://digg.com/submit?url=%s&title=%t Captured by Webpage Screenshot - http://bit.ly/cF6sYP",dataType:"image"}];