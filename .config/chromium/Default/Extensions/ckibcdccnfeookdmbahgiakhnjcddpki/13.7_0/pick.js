var renderTabs=function(b){var a=$("#tabs");var c=function(d){if(d.url.substr(8)=="chrome://"){return}var e=$("<li class=moshe><img />&nbsp;<span /></li>")[0];e.dataset.tabId=d.id;e.dataset.windowId=d.windowId;e.dataset.index=d.index;$("img",e)[0].src=d.favIconUrl;$("span",e).html(d.title||d.url);a.append(e)};b.forEach(c)};var readHTMLFromMHTML=function(a,b){b=b||function(){}};$(document).ready(function(){chrome.tabs.query({},renderTabs)});$(".moshe span").live("click",function(a){$(this.parentElement).trigger("click")});$(".moshe img").live("click",function(a){$(this.parentElement).trigger("click")});$(".moshe").live("click",function(g){var f=window.intent||window.webkitIntent;var d;if(f.type==="image/jpeg"){d="jpeg"}else{d="png"}var c=parseInt(g.target.dataset.tabId);var a=parseInt(g.target.dataset.windowId);var b=parseInt(g.target.dataset.index);chrome.windows.create({tabId:c},function(e){chrome.tabs.captureVisibleTab(e.id,{format:d},function(h){chrome.tabs.move([c],{windowId:a,index:b},function(){f.postResult(h)})})});return false});